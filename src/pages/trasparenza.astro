---
import BaseLayout from '../components/layout/BaseLayout.astro';

const base = import.meta.env.BASE_URL;

// Data ultimo aggiornamento - da modificare quando si aggiornano i documenti
const dataAggiornamento = "28 gennaio 2026";

// Dati identificativi dell'Ente - DATI FITTIZI DA SOSTITUIRE
const datiEnte = {
  denominazione: "La Festa delle Medie ETS",
  codiceFiscale: "91234567890",
  partitaIva: "01234567890",
  pec: "lafestadellemedie@pec.it",
  sede: "Via Roma, 42 - 00100 Roma (RM)",
  runts: "12345"
};

// Organi sociali - DATI FITTIZI DA SOSTITUIRE
const organiSociali = {
  presidente: "Mario Rossi",
  consiglieri: [
    "Laura Bianchi - Vicepresidente",
    "Giuseppe Verdi - Segretario",
    "Anna Neri - Tesoriere",
    "Francesco Russo - Consigliere",
    "Elena Marino - Consigliere"
  ],
  organoControllo: "" // Non presente
};

// Documenti - PLACEHOLDER DA SOSTITUIRE CON I FILE REALI
const documenti = {
  statuto: "", // Da caricare: `${base}documenti/statuto.pdf`
  attoCostitutivo: "", // Da caricare: `${base}documenti/atto-costitutivo.pdf`
  bilanci: [
    { anno: "2025", file: "", tipo: "Bilancio di esercizio" },
    { anno: "2024", file: "", tipo: "Bilancio di esercizio" },
    { anno: "2023", file: "", tipo: "Rendiconto per cassa" }
  ],
  contributiPubblici: [
    { anno: "2024", ente: "Comune di Roma", importo: "15.000,00", finalita: "Contributo per eventi culturali giovanili" }
  ],
  cinquePerMille: [
    { anno: "2024", importo: "2.350,00", rendiconto: "" }
  ]
};
---

<BaseLayout
  title="Amministrazione Trasparente - La Festa delle Medie ETS"
  description="Sezione dedicata alla trasparenza amministrativa ai sensi del Codice del Terzo Settore (D.Lgs. 117/2017)"
>
  <div class="page-content">
    <div class="container">
      <!-- Hero -->
      <header class="page-header">
        <span class="page-label">Obblighi di Legge</span>
        <h1 class="page-title">Amministrazione Trasparente</h1>
        <p class="page-subtitle">
          Sezione dedicata alla pubblicazione dei dati e documenti previsti dalla normativa
          vigente per gli Enti del Terzo Settore (D.Lgs. 117/2017 - Codice del Terzo Settore).
        </p>
        <p class="last-update">
          <strong>Ultimo aggiornamento:</strong> {dataAggiornamento}
        </p>
      </header>

      <!-- Identificazione dell'Ente -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">01</span>
          Identificazione dell'Ente
        </h2>
        <div class="info-card">
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Denominazione</span>
              <span class="info-value">{datiEnte.denominazione}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Codice Fiscale</span>
              <span class="info-value">{datiEnte.codiceFiscale}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Partita IVA</span>
              <span class="info-value">{datiEnte.partitaIva}</span>
            </div>
            <div class="info-item">
              <span class="info-label">PEC</span>
              <span class="info-value">
                <a href={`mailto:${datiEnte.pec}`}>{datiEnte.pec}</a>
              </span>
            </div>
            <div class="info-item">
              <span class="info-label">Sede Legale</span>
              <span class="info-value">{datiEnte.sede}</span>
            </div>
            <div class="info-item">
              <span class="info-label">Iscrizione RUNTS</span>
              <span class="info-value">N. {datiEnte.runts}</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Statuto e Atto Costitutivo -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">02</span>
          Statuto e Atto Costitutivo
        </h2>
        <p class="section-description">
          Documenti fondamentali dell'Ente ai sensi dell'art. 21 del Codice del Terzo Settore.
        </p>
        <div class="documents-grid">
          <div class="document-card">
            <div class="document-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                <polyline points="14,2 14,8 20,8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10,9 9,9 8,9"/>
              </svg>
            </div>
            <div class="document-info">
              <h3 class="document-title">Statuto</h3>
              <p class="document-desc">Statuto vigente dell'associazione</p>
            </div>
            {documenti.statuto ? (
              <a href={documenti.statuto} class="btn-outline btn-sm" target="_blank">
                Scarica PDF
              </a>
            ) : (
              <span class="document-pending">In pubblicazione</span>
            )}
          </div>

          <div class="document-card">
            <div class="document-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                <polyline points="14,2 14,8 20,8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10,9 9,9 8,9"/>
              </svg>
            </div>
            <div class="document-info">
              <h3 class="document-title">Atto Costitutivo</h3>
              <p class="document-desc">Atto di costituzione dell'ente</p>
            </div>
            {documenti.attoCostitutivo ? (
              <a href={documenti.attoCostitutivo} class="btn-outline btn-sm" target="_blank">
                Scarica PDF
              </a>
            ) : (
              <span class="document-pending">In pubblicazione</span>
            )}
          </div>
        </div>
      </section>

      <!-- Organi Sociali -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">03</span>
          Organi Sociali
        </h2>
        <p class="section-description">
          Composizione degli organi direttivi e dei rappresentanti legali dell'Ente.
        </p>

        <div class="organs-grid">
          <div class="organ-card">
            <h3 class="organ-title">Rappresentante Legale</h3>
            <div class="organ-member president">
              <span class="member-role">Presidente</span>
              <span class="member-name">{organiSociali.presidente}</span>
            </div>
          </div>

          <div class="organ-card">
            <h3 class="organ-title">Consiglio Direttivo</h3>
            <ul class="organ-list">
              {organiSociali.consiglieri.map((membro) => (
                <li class="organ-member">
                  <span class="member-name">{membro}</span>
                </li>
              ))}
            </ul>
          </div>

          {organiSociali.organoControllo && (
            <div class="organ-card">
              <h3 class="organ-title">Organo di Controllo</h3>
              <div class="organ-member">
                <span class="member-name">{organiSociali.organoControllo}</span>
              </div>
            </div>
          )}
        </div>
      </section>

      <!-- Bilanci e Rendiconti -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">04</span>
          Bilanci e Rendiconti
        </h2>
        <p class="section-description">
          Bilanci di esercizio o rendiconti per cassa (per proventi inferiori a 220.000 euro)
          ai sensi degli artt. 13 e 87 del Codice del Terzo Settore.
        </p>

        <div class="table-wrapper">
          <table class="transparency-table">
            <thead>
              <tr>
                <th>Anno</th>
                <th>Tipologia</th>
                <th>Documento</th>
              </tr>
            </thead>
            <tbody>
              {documenti.bilanci.map((bilancio) => (
                <tr>
                  <td><strong>{bilancio.anno}</strong></td>
                  <td>{bilancio.tipo}</td>
                  <td>
                    {bilancio.file ? (
                      <a href={bilancio.file} class="table-link" target="_blank">
                        Scarica PDF
                      </a>
                    ) : (
                      <span class="document-pending">In pubblicazione</span>
                    )}
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <div class="info-note">
          <strong>Nota:</strong> Il bilancio di esercizio comprende Stato Patrimoniale,
          Rendiconto Gestionale e Relazione di Missione. Per enti con proventi inferiori
          a 220.000 euro annui e possibile redigere il rendiconto per cassa.
        </div>
      </section>

      <!-- Contributi Pubblici -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">05</span>
          Contributi Pubblici
        </h2>
        <p class="section-description">
          Elenco di sovvenzioni, sussidi, vantaggi, contributi o aiuti, in denaro o in natura,
          non aventi carattere generale e privi di natura corrispettiva, retributiva o risarcitoria,
          erogati dalla Pubblica Amministrazione (L. 124/2017, art. 1 commi 125-129).
        </p>

        {documenti.contributiPubblici.length > 0 ? (
          <div class="table-wrapper">
            <table class="transparency-table">
              <thead>
                <tr>
                  <th>Anno</th>
                  <th>Ente Erogante</th>
                  <th>Importo</th>
                  <th>Finalita</th>
                </tr>
              </thead>
              <tbody>
                {documenti.contributiPubblici.map((contributo) => (
                  <tr>
                    <td><strong>{contributo.anno}</strong></td>
                    <td>{contributo.ente}</td>
                    <td>&euro; {contributo.importo}</td>
                    <td>{contributo.finalita}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div class="no-data-card">
            <p>Nell'ultimo esercizio l'Ente non ha ricevuto contributi pubblici superiori a 10.000 euro
            soggetti all'obbligo di pubblicazione ai sensi della L. 124/2017.</p>
          </div>
        )}

        <div class="info-note">
          <strong>Obbligo di pubblicazione:</strong> Gli enti che ricevono contributi pubblici
          superiori a 10.000 euro annui sono tenuti a pubblicare un rendiconto dettagliato
          entro il 30 giugno di ogni anno.
        </div>
      </section>

      <!-- 5x1000 -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">06</span>
          5 per Mille
        </h2>
        <p class="section-description">
          Rendiconto relativo all'utilizzo delle somme percepite tramite il 5 per mille
          (DPCM 23 aprile 2010).
        </p>

        {documenti.cinquePerMille.length > 0 ? (
          <div class="table-wrapper">
            <table class="transparency-table">
              <thead>
                <tr>
                  <th>Anno di Riferimento</th>
                  <th>Importo Percepito</th>
                  <th>Rendiconto</th>
                </tr>
              </thead>
              <tbody>
                {documenti.cinquePerMille.map((item) => (
                  <tr>
                    <td><strong>{item.anno}</strong></td>
                    <td>&euro; {item.importo}</td>
                    <td>
                      {item.rendiconto ? (
                        <a href={item.rendiconto} class="table-link" target="_blank">
                          Scarica PDF
                        </a>
                      ) : (
                        <span class="document-pending">In pubblicazione</span>
                      )}
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div class="no-data-card">
            <p>L'Ente non ha percepito somme derivanti dal 5 per mille nell'ultimo esercizio
            oppure i rendiconti sono in fase di elaborazione.</p>
          </div>
        )}
      </section>

      <!-- Compensi Amministratori -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">07</span>
          Compensi agli Amministratori
        </h2>
        <p class="section-description">
          Informazioni sui compensi eventualmente riconosciuti agli amministratori
          (art. 14 del Codice del Terzo Settore).
        </p>

        <div class="no-data-card highlight">
          <p><strong>Dichiarazione:</strong> Gli amministratori dell'Ente svolgono la propria
          attivita a titolo gratuito. Non sono stati erogati compensi superiori a quanto
          eventualmente previsto dallo statuto e dalla normativa vigente.</p>
        </div>

        <div class="info-note">
          <strong>Obbligo di pubblicazione:</strong> Per compensi superiori a 100.000 euro
          annui e obbligatoria la pubblicazione dettagliata ai sensi dell'art. 14 comma 2
          del D.Lgs. 117/2017.
        </div>
      </section>

      <!-- Attivita Svolte -->
      <section class="transparency-section">
        <h2 class="section-title">
          <span class="section-number">08</span>
          Attivita e Finalita
        </h2>
        <p class="section-description">
          Informazioni sulle attivita di interesse generale svolte dall'Ente
          (art. 5 del Codice del Terzo Settore).
        </p>

        <div class="activities-grid">
          <div class="activity-card">
            <h3 class="activity-title">Attivita Culturali</h3>
            <p class="activity-desc">
              Organizzazione e gestione di attivita culturali, artistiche e ricreative
              di interesse sociale, incluse attivita editoriali, di promozione e
              diffusione della cultura e della pratica del volontariato.
            </p>
          </div>

          <div class="activity-card">
            <h3 class="activity-title">Eventi e Spettacoli</h3>
            <p class="activity-desc">
              Programmazione e realizzazione di eventi musicali, teatrali,
              cinematografici e di intrattenimento aperti alla comunita.
            </p>
          </div>

          <div class="activity-card">
            <h3 class="activity-title">Formazione e Laboratori</h3>
            <p class="activity-desc">
              Organizzazione di workshop, laboratori e attivita educative
              rivolte a giovani e adulti per la promozione dell'arte e della creativita.
            </p>
          </div>
        </div>

        <div class="cta-section">
          <p>Per maggiori informazioni sulle nostre attivita:</p>
          <a href={`${base}chi-siamo`} class="btn-outline">Scopri Chi Siamo</a>
        </div>
      </section>

      <!-- Note legali -->
      <section class="transparency-section legal-notes">
        <h2 class="section-title">
          <span class="section-number">09</span>
          Riferimenti Normativi
        </h2>
        <div class="legal-content">
          <ul class="legal-list">
            <li><strong>D.Lgs. 117/2017</strong> - Codice del Terzo Settore</li>
            <li><strong>L. 124/2017, art. 1 commi 125-129</strong> - Obblighi di trasparenza su contributi pubblici</li>
            <li><strong>DPCM 23 aprile 2010</strong> - Rendicontazione 5 per mille</li>
            <li><strong>D.M. 5 marzo 2020</strong> - Schemi di bilancio ETS</li>
          </ul>
          <p class="legal-note">
            I dati pubblicati in questa sezione sono conformi a quanto iscritto nel
            <strong>RUNTS</strong> (Registro Unico Nazionale del Terzo Settore).
            In caso di discrepanze, fanno fede i dati presenti nel registro.
          </p>
        </div>
      </section>

    </div>
  </div>
</BaseLayout>

<style>
  .page-content {
    padding-top: calc(72px + var(--space-3xl));
    padding-bottom: var(--space-3xl);
  }

  .page-header {
    margin-bottom: var(--space-3xl);
    max-width: 800px;
  }

  .page-label {
    display: inline-block;
    font-size: var(--text-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: var(--tracking-widest);
    color: var(--color-accent);
    margin-bottom: var(--space-md);
    padding: var(--space-xs) var(--space-md);
    background: rgba(45, 90, 90, 0.1);
    border-radius: var(--radius-sm);
  }

  .page-title {
    font-size: var(--text-5xl);
    font-weight: 700;
    margin-bottom: var(--space-lg);
  }

  .page-subtitle {
    font-size: var(--text-xl);
    line-height: var(--leading-relaxed);
    color: var(--color-gray-dark);
    margin-bottom: var(--space-md);
  }

  .last-update {
    font-size: var(--text-sm);
    color: var(--color-gray);
    margin: 0;
  }

  /* Sezioni */
  .transparency-section {
    margin-bottom: var(--space-3xl);
    padding-bottom: var(--space-2xl);
    border-bottom: 1px solid var(--color-gray-light);
  }

  .transparency-section:last-child {
    border-bottom: none;
  }

  .section-title {
    font-size: var(--text-2xl);
    font-weight: 700;
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-md);
  }

  .section-number {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-accent);
    background: rgba(45, 90, 90, 0.1);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
  }

  .section-description {
    font-size: var(--text-base);
    color: var(--color-gray-dark);
    max-width: 800px;
    margin-bottom: var(--space-xl);
  }

  /* Info Card */
  .info-card {
    background: var(--color-gray-light);
    padding: var(--space-xl);
    border-radius: var(--radius-md);
  }

  .info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-lg);
  }

  .info-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .info-label {
    font-size: var(--text-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    color: var(--color-gray);
  }

  .info-value {
    font-size: var(--text-base);
    font-weight: 500;
    color: var(--color-black);
  }

  .info-value a {
    color: var(--color-accent);
  }

  /* Documents Grid */
  .documents-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-lg);
  }

  .document-card {
    display: flex;
    align-items: center;
    gap: var(--space-lg);
    padding: var(--space-lg);
    background: var(--color-gray-light);
    border-radius: var(--radius-md);
  }

  .document-icon {
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-white);
    border-radius: var(--radius-sm);
    color: var(--color-accent);
  }

  .document-info {
    flex: 1;
  }

  .document-title {
    font-size: var(--text-lg);
    font-weight: 600;
    margin-bottom: var(--space-xs);
  }

  .document-desc {
    font-size: var(--text-sm);
    color: var(--color-gray);
    margin: 0;
  }

  .document-pending {
    font-size: var(--text-sm);
    color: var(--color-gray);
    font-style: italic;
  }

  /* Organs Grid */
  .organs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
  }

  .organ-card {
    background: var(--color-gray-light);
    padding: var(--space-xl);
    border-radius: var(--radius-md);
  }

  .organ-title {
    font-size: var(--text-sm);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    color: var(--color-accent);
    margin-bottom: var(--space-lg);
    padding-bottom: var(--space-sm);
    border-bottom: 2px solid var(--color-accent);
  }

  .organ-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .organ-member {
    padding: var(--space-sm) 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  }

  .organ-member:last-child {
    border-bottom: none;
  }

  .organ-member.president {
    background: var(--color-white);
    padding: var(--space-md);
    border-radius: var(--radius-sm);
  }

  .member-role {
    display: block;
    font-size: var(--text-xs);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    color: var(--color-gray);
    margin-bottom: var(--space-xs);
  }

  .member-name {
    font-size: var(--text-base);
    font-weight: 500;
  }

  /* Tables */
  .table-wrapper {
    overflow-x: auto;
    margin-bottom: var(--space-lg);
  }

  .transparency-table {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--text-sm);
  }

  .transparency-table th,
  .transparency-table td {
    padding: var(--space-md);
    text-align: left;
    border-bottom: 1px solid var(--color-gray-light);
  }

  .transparency-table th {
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    font-size: var(--text-xs);
    color: var(--color-gray);
    background: var(--color-gray-light);
  }

  .transparency-table tr:hover {
    background: rgba(0, 0, 0, 0.02);
  }

  .table-link {
    color: var(--color-accent);
    font-weight: 500;
    text-decoration: underline;
  }

  /* Info Note */
  .info-note {
    font-size: var(--text-sm);
    color: var(--color-gray-dark);
    padding: var(--space-md);
    background: rgba(45, 90, 90, 0.05);
    border-left: 3px solid var(--color-accent);
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  }

  /* No Data Card */
  .no-data-card {
    background: var(--color-gray-light);
    padding: var(--space-xl);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-lg);
  }

  .no-data-card p {
    margin: 0;
    color: var(--color-gray-dark);
  }

  .no-data-card.highlight {
    background: rgba(45, 90, 90, 0.1);
    border: 1px solid rgba(45, 90, 90, 0.2);
  }

  /* Activities Grid */
  .activities-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
  }

  .activity-card {
    padding: var(--space-xl);
    background: var(--color-gray-light);
    border-radius: var(--radius-md);
  }

  .activity-title {
    font-size: var(--text-lg);
    font-weight: 600;
    margin-bottom: var(--space-md);
  }

  .activity-desc {
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
    color: var(--color-gray-dark);
    margin: 0;
  }

  .cta-section {
    text-align: center;
    padding: var(--space-xl);
    background: var(--color-gray-light);
    border-radius: var(--radius-md);
  }

  .cta-section p {
    margin-bottom: var(--space-md);
    color: var(--color-gray-dark);
  }

  /* Legal Notes */
  .legal-notes {
    background: var(--color-black);
    color: var(--color-white);
    padding: var(--space-2xl);
    border-radius: var(--radius-md);
    margin-top: var(--space-2xl);
  }

  .legal-notes .section-title {
    color: var(--color-white);
  }

  .legal-notes .section-number {
    background: rgba(255, 255, 255, 0.1);
    color: var(--color-white);
  }

  .legal-content {
    margin-top: var(--space-lg);
  }

  .legal-list {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--space-lg) 0;
  }

  .legal-list li {
    padding: var(--space-sm) 0;
    color: rgba(255, 255, 255, 0.8);
    font-size: var(--text-sm);
  }

  .legal-note {
    font-size: var(--text-sm);
    color: rgba(255, 255, 255, 0.7);
    padding-top: var(--space-md);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .info-grid {
      grid-template-columns: 1fr;
    }

    .documents-grid {
      grid-template-columns: 1fr;
    }

    .activities-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 768px) {
    .page-content {
      padding-top: calc(65px + var(--space-2xl));
    }

    .page-title {
      font-size: var(--text-3xl);
    }

    .page-subtitle {
      font-size: var(--text-lg);
    }

    .section-title {
      font-size: var(--text-xl);
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-sm);
    }

    .document-card {
      flex-direction: column;
      text-align: center;
    }

    .activities-grid {
      grid-template-columns: 1fr;
    }

    .organs-grid {
      grid-template-columns: 1fr;
    }

    .legal-notes {
      padding: var(--space-xl);
    }
  }
</style>
